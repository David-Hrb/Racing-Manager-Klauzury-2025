<template>
    <div class="center">
    <div class="char-options">
    <h2>Vytvo콏te si Postavu</h2>
      <div class="inputs">
        <div class="inputsleft">
          <h3>Jm칠no</h3>
          <input
            type="text"
            v-model="name"
            @input="filterLettersOnly('name')"
            title="Jm칠no mus칤 obsahovat pouze p칤smena a mezery"
            required
          >
          <h3>P콏칤jmen칤</h3>
          <input
            type="text"
            v-model="surname"
            @input="filterLettersOnly('surname')"
            title="P콏칤jmen칤 mus칤 obsahovat pouze p칤smena a mezery"
            required
          >
          <h3>N치rodnost</h3>
          <select id="nationality" v-model="nationality" name="nationality" required>
              <option value="nothing">-- Vyberte n치rodnost --</option>
              <option value="AF" data-flag="fi-cz">游뷣릖 Afgh치nist치n</option>
              <option value="AL" data-flag="al">游뷣릖 Alb치nie</option>
              <option value="DZ" data-flag="dz">游뾇릖 Al쮂rsko</option>
              <option value="AD" data-flag="ad">游뷣릖 Andorra</option>
              <option value="AO" data-flag="ao">游뷣릖 Angola</option>
              <option value="AG" data-flag="ag">游뷣릖 Antigua a Barbuda</option>
              <option value="AR" data-flag="ar">游뷣릖 Argentina</option>
              <option value="AM" data-flag="am">游뷣릖 Arm칠nie</option>
              <option value="AU" data-flag="au">游뷣릖 Austr치lie</option>
              <option value="AT" data-flag="at">游뷣릖 Rakousko</option>
              <option value="AZ" data-flag="az">游뷣릖 츼zerb치jd쮂멽</option>
              <option value="BS" data-flag="bs">游游 Bahamy</option>
              <option value="BH" data-flag="bh">游游 Bahrajn</option>
              <option value="BD" data-flag="bd">游游 Banglad칠코</option>
              <option value="BB" data-flag="bb">游游 Barbados</option>
              <option value="BY" data-flag="by">游游 B캩lorusko</option>
              <option value="BE" data-flag="be">游游 Belgie</option>
              <option value="BZ" data-flag="bz">游游 Belize</option>
              <option value="BJ" data-flag="bj">游游 Benin</option>
              <option value="BT" data-flag="bt">游游 Bh칰t치n</option>
              <option value="BO" data-flag="bo">游游 Bol칤vie</option>
              <option value="BA" data-flag="ba">游游 Bosna a Hercegovina</option>
              <option value="BW" data-flag="bw">游游 Botswana</option>
              <option value="BR" data-flag="br">游游 Braz칤lie</option>
              <option value="BN" data-flag="bn">游游 Brunej</option>
              <option value="BG" data-flag="bg">游游 Bulharsko</option>
              <option value="BF" data-flag="bf">游游 Burkina Faso</option>
              <option value="BI" data-flag="bi">游游 Burundi</option>
              <option value="KH" data-flag="kh">游썷릖 Kambod쬬</option>
              <option value="CM" data-flag="cm">游뻟릖 Kamerun</option>
              <option value="CA" data-flag="ca">游뻟릖 Kanada</option>
              <option value="CV" data-flag="cv">游뻟릖 Kapverdy</option>
              <option value="CF" data-flag="cf">游뻟릖 St콏edoafrick치 republika</option>
              <option value="TD" data-flag="td">游좷릖 캛ad</option>
              <option value="CL" data-flag="cl">游뻟릖 Chile</option>
              <option value="CN" data-flag="cn">游뻟릖 캛칤na</option>
              <option value="CO" data-flag="co">游뻟릖 Kolumbie</option>
              <option value="KM" data-flag="km">游썷릖 Komory</option>
              <option value="CG" data-flag="cg">游뻟릖 Kon쬽k치 republika</option>
              <option value="CD" data-flag="cd">游뻟릖 Demokratick치 republika Kongo</option>
              <option value="CR" data-flag="cr">游뻟릖 Kostarika</option>
              <option value="CI" data-flag="ci">游뻟릖 Pob콏e쮂 slonoviny</option>
              <option value="HR" data-flag="hr">游쇓릖 Chorvatsko</option>
              <option value="CU" data-flag="cu">游뻟릖 Kuba</option>
              <option value="CY" data-flag="cy">游뻟릖 Kypr</option>
              <option value="CZ" data-flag="cz">游뻟릖 캛esko</option>
              <option value="DK" data-flag="dk">游뾇릖 D치nsko</option>
              <option value="DJ" data-flag="dj">游뾇릖 D쬴butsko</option>
              <option value="DM" data-flag="dm">游뾇릖 Dominika</option>
              <option value="DO" data-flag="do">游뾇릖 Dominik치nsk치 republika</option>
              <option value="EC" data-flag="ec">游쀯릖 Ekv치dor</option>
              <option value="EG" data-flag="eg">游쀯릖 Egypt</option>
              <option value="SV" data-flag="sv">游젏릖 Salvador</option>
              <option value="GQ" data-flag="gq">游섫릖 Rovn칤kov치 Guinea</option>
              <option value="ER" data-flag="er">游쀯릖 Eritrea</option>
              <option value="EE" data-flag="ee">游쀯릖 Estonsko</option>
              <option value="SZ" data-flag="sz">游젏릖 Eswatini</option>
              <option value="ET" data-flag="et">游쀯릖 Etiopie</option>
              <option value="FJ" data-flag="fj">游游 Fid쬴</option>
              <option value="FI" data-flag="fi">游游 Finsko</option>
              <option value="FR" data-flag="fr">游游 Francie</option>
              <option value="GA" data-flag="ga">游섫릖 Gabon</option>
              <option value="GM" data-flag="gm">游섫릖 Gambie</option>
              <option value="GE" data-flag="ge">游섫릖 Gruzie</option>
              <option value="DE" data-flag="de">游뾇릖 N캩mecko</option>
              <option value="GH" data-flag="gh">游섫릖 Ghana</option>
              <option value="GR" data-flag="gr">游섫릖 콎ecko</option>
              <option value="GD" data-flag="gd">游섫릖 Grenada</option>
              <option value="GT" data-flag="gt">游섫릖 Guatemala</option>
              <option value="GN" data-flag="gn">游섫릖 Guinea</option>
              <option value="GW" data-flag="gw">游섫릖 Guinea-Bissau</option>
              <option value="GY" data-flag="gy">游섫릖 Guyana</option>
              <option value="HT" data-flag="ht">游쇓릖 Haiti</option>
              <option value="HN" data-flag="hn">游쇓릖 Honduras</option>
              <option value="HU" data-flag="hu">游쇓릖 Ma캞arsko</option>
              <option value="IS" data-flag="is">游쉻릖 Island</option>
              <option value="IN" data-flag="in">游쉻릖 Indie</option>
              <option value="ID" data-flag="id">游쉻릖 Indon칠sie</option>
              <option value="IR" data-flag="ir">游쉻릖 칈r치n</option>
              <option value="IQ" data-flag="iq">游쉻릖 Ir치k</option>
              <option value="IE" data-flag="ie">游쉻릖 Irsko</option>
              <option value="IL" data-flag="il">游쉻릖 Izrael</option>
              <option value="IT" data-flag="it">游쉻릖 It치lie</option>
              <option value="JM" data-flag="jm">游游 Jamajka</option>
              <option value="JP" data-flag="jp">游游 Japonsko</option>
              <option value="JO" data-flag="jo">游游 Jord치nsko</option>
              <option value="KZ" data-flag="kz">游썷릖 Kazachst치n</option>
              <option value="KE" data-flag="ke">游썷릖 Ke켿a</option>
              <option value="KI" data-flag="ki">游썷릖 Kiribati</option>
              <option value="KP" data-flag="kp">游썷릖 Severn칤 Korea</option>
              <option value="KR" data-flag="kr">游썷릖 Ji쬹칤 Korea</option>
              <option value="KW" data-flag="kw">游썷릖 Kuvajt</option>
              <option value="KG" data-flag="kg">游썷릖 Kyrgyzst치n</option>
              <option value="LA" data-flag="la">游쐟릖 Laos</option>
              <option value="LV" data-flag="lv">游쐟릖 Loty코sko</option>
              <option value="LB" data-flag="lb">游쐟릖 Libanon</option>
              <option value="LS" data-flag="ls">游쐟릖 Lesotho</option>
              <option value="LR" data-flag="lr">游쐟릖 Lib칠rie</option>
              <option value="LY" data-flag="ly">游쐟릖 Libye</option>
              <option value="LI" data-flag="li">游쐟릖 Lichten코tejnsko</option>
              <option value="LT" data-flag="lt">游쐟릖 Litva</option>
              <option value="LU" data-flag="lu">游쐟릖 Lucembursko</option>
              <option value="MG" data-flag="mg">游쓇릖 Madagaskar</option>
              <option value="MW" data-flag="mw">游쓇릖 Malawi</option>
              <option value="MY" data-flag="my">游쓇릖 Malajsie</option>
              <option value="MV" data-flag="mv">游쓇릖 Maledivy</option>
              <option value="ML" data-flag="ml">游쓇릖 Mali</option>
              <option value="MT" data-flag="mt">游쓇릖 Malta</option>
              <option value="MH" data-flag="mh">游쓇릖 Marshallovy ostrovy</option>
              <option value="MR" data-flag="mr">游쓇릖 Maurit치nie</option>
              <option value="MU" data-flag="mu">游쓇릖 Mauricius</option>
              <option value="MX" data-flag="mx">游쓇릖 Mexiko</option>
              <option value="FM" data-flag="fm">游游 Mikron칠sie</option>
              <option value="MD" data-flag="md">游쓇릖 Moldavsko</option>
              <option value="MC" data-flag="mc">游쓇릖 Monako</option>
              <option value="MN" data-flag="mn">游쓇릖 Mongolsko</option>
              <option value="ME" data-flag="me">游쓇릖 캛ern치 Hora</option>
              <option value="MA" data-flag="ma">游쓇릖 Maroko</option>
              <option value="MZ" data-flag="mz">游쓇릖 Mosambik</option>
              <option value="MM" data-flag="mm">游쓇릖 Myanmar</option>
              <option value="NA" data-flag="na">游游 Namibie</option>
              <option value="NR" data-flag="nr">游游 Nauru</option>
              <option value="NP" data-flag="np">游游 Nep치l</option>
              <option value="NL" data-flag="nl">游游 Nizozemsko</option>
              <option value="NZ" data-flag="nz">游游 Nov칳 Z칠land</option>
              <option value="NI" data-flag="ni">游游 Nikaragua</option>
              <option value="NE" data-flag="ne">游游 Niger</option>
              <option value="NG" data-flag="ng">游游 Nig칠rie</option>
              <option value="MK" data-flag="mk">游쓇릖 Severn칤 Makedonie</option>
              <option value="NO" data-flag="no">游游 Norsko</option>
              <option value="OM" data-flag="om">游엃릖 Om치n</option>
              <option value="PK" data-flag="pk">游왫릖 P치kist치n</option>
              <option value="PW" data-flag="pw">游왫릖 Palau</option>
              <option value="PS" data-flag="ps">游왫릖 Palestina</option>
              <option value="PA" data-flag="pa">游왫릖 Panama</option>
              <option value="PG" data-flag="pg">游왫릖 Papua-Nov치 Guinea</option>
              <option value="PY" data-flag="py">游왫릖 Paraguay</option>
              <option value="PE" data-flag="pe">游왫릖 Peru</option>
              <option value="PH" data-flag="ph">游왫릖 Filip칤ny</option>
              <option value="PL" data-flag="pl">游왫릖 Polsko</option>
              <option value="PT" data-flag="pt">游왫릖 Portugalsko</option>
              <option value="QA" data-flag="qa">游윓릖 Katar</option>
              <option value="RO" data-flag="ro">游游 Rumunsko</option>
              <option value="RU" data-flag="ru">游游 Rusko</option>
              <option value="RW" data-flag="rw">游游 Rwanda</option>
              <option value="KN" data-flag="kn">游썷릖 Svat칳 Kry코tof a Nevis</option>
              <option value="LC" data-flag="lc">游쐟릖 Svat치 Lucie</option>
              <option value="VC" data-flag="vc">游游 Svat칳 Vincenc a Grenadiny</option>
              <option value="WS" data-flag="ws">游쩛릖 Samoa</option>
              <option value="SM" data-flag="sm">游젏릖 San Marino</option>
              <option value="ST" data-flag="st">游젏릖 Svat칳 Tom치코 a Princ콢v ostrov</option>
              <option value="SA" data-flag="sa">游젏릖 Sa칰dsk치 Ar치bie</option>
              <option value="SN" data-flag="sn">游젏릖 Senegal</option>
              <option value="RS" data-flag="rs">游游 Srbsko</option>
              <option value="SC" data-flag="sc">游젏릖 Seychely</option>
              <option value="SL" data-flag="sl">游젏릖 Sierra Leone</option>
              <option value="SG" data-flag="sg">游젏릖 Singapur</option>
              <option value="SK" data-flag="sk">游젏릖 Slovensko</option>
              <option value="SI" data-flag="si">游젏릖 Slovinsko</option>
              <option value="SB" data-flag="sb">游젏릖 마lamounovy ostrovy</option>
              <option value="SO" data-flag="so">游젏릖 Som치lsko</option>
              <option value="ZA" data-flag="za">游游 Jihoafrick치 republika</option>
              <option value="SS" data-flag="ss">游젏릖 Ji쬹칤 S칰d치n</option>
              <option value="ES" data-flag="es">游쀯릖 맗an캩lsko</option>
              <option value="LK" data-flag="lk">游쐟릖 Sr칤 Lanka</option>
              <option value="SD" data-flag="sd">游젏릖 S칰d치n</option>
              <option value="SR" data-flag="sr">游젏릖 Surinam</option>
              <option value="SE" data-flag="se">游젏릖 맜칠dsko</option>
              <option value="CH" data-flag="ch">游뻟릖 맜칳carsko</option>
              <option value="SY" data-flag="sy">游젏릖 S칳rie</option>
              <option value="TJ" data-flag="tj">游좷릖 T치d쬴kist치n</option>
              <option value="TZ" data-flag="tz">游좷릖 Tanzanie</option>
              <option value="TH" data-flag="th">游좷릖 Thajsko</option>
              <option value="TL" data-flag="tl">游좷릖 V칳chodn칤 Timor</option>
              <option value="TG" data-flag="tg">游좷릖 Togo</option>
              <option value="TO" data-flag="to">游좷릖 Tonga</option>
              <option value="TT" data-flag="tt">游좷릖 Trinidad a Tobago</option>
              <option value="TN" data-flag="tn">游좷릖 Tunisko</option>
              <option value="TR" data-flag="tr">游좷릖 Turecko</option>
              <option value="TM" data-flag="tm">游좷릖 Turkmenist치n</option>
              <option value="TV" data-flag="tv">游좷릖 Tuvalu</option>
              <option value="UG" data-flag="ug">游쥟릖 Uganda</option>
              <option value="UA" data-flag="ua">游쥟릖 Ukrajina</option>
              <option value="AE" data-flag="ae">游뷣릖 Spojen칠 arabsk칠 emir치ty</option>
              <option value="GB" data-flag="gb">游섫릖 Velk치 Brit치nie</option>
              <option value="US" data-flag="us">游쥟릖 Spojen칠 st치ty americk칠</option>
              <option value="UY" data-flag="uy">游쥟릖 Uruguay</option>
              <option value="UZ" data-flag="uz">游쥟릖 Uzbekist치n</option>
              <option value="VU" data-flag="vu">游游 Vanuatu</option>
              <option value="VA" data-flag="va">游游 Vatik치n</option>
              <option value="VE" data-flag="ve">游游 Venezuela</option>
              <option value="VN" data-flag="vn">游游 Vietnam</option>
              <option value="YE" data-flag="ye">游쮫릖 Jemen</option>
              <option value="ZM" data-flag="zm">游游 Zambie</option>
              <option value="ZW" data-flag="zw">游游 Zimbabwe</option>
          </select>
    
          <h3>Datum Narozen칤</h3>
          <input
            type="date"
            v-model="date"
            min="1945-01-01"
            max="2007-12-31"
            required
          >
          <h3>B칳val칠 Zam캩stn치n칤</h3>
          <select id="lastwork" v-model="lastwork" name="lastwork" required>
              <option value="nothing">-- Vyberte zku코enosti --</option>
              <option value="none">콯치dn칠</option>
              <option value="manager">Mana쬰r</option>
              <option value="mechanik">Mechanik</option>
              <option value="zavodnik">Z치vodn칤k</option>
              <option value="inzenyr">Z치vodn칤 in쬰n칳r</option>
              <option value="strategr">Strat칠g t칳mu</option>
              <option value="analytik">Datov칳 analytik</option>
              <option value="pitcrew">캛len pit stop t칳mu</option>
              <option value="pr">PR / M칠dia mana쬰r</option>
              <option value="scout">Talent scout</option>
              <option value="tren칠r">Tren칠r jezdc콢</option>
          </select>
        </div>
        <div class="inputsright">
          <h3>Avatar</h3>
           <select id="gender" name="gender" v-model="selectedGender" required>
            <option value="nothing">-- Vyberte pohlav칤 --</option>
            <option value="men">Mu</option>
            <option value="women">콯ena</option>
          </select>
          <h3>Vyberte avatara</h3>
          <div class="avatarchooser">

              <div class="avatarchooseicon"   
                  v-for="(males) in righticon" 
                  :key="males.type">
                  <input type="radio" :name="`avatar`" :value="`${males.type}`" :id="`${males.type}`" v-model="avatar">
                  <label :for="`${males.type}`" ><img :src="`${males.road}`" :alt="`${males.type}`"></label>
              </div>
          </div>
        
         
        </div>
      </div>

  
      
      <button @click="switchToTeams" class="menu-button next">
        Vyberte Team
      </button>
      

  </div>
  </div>

</template>

<script setup>
const sound = useClickSound(); 
const name = ref('');
const surname = ref('');
const nationality = ref('nothing');
const date = ref('');

const lastwork = ref('nothing');
const avatar = ref('');

const selectedGender = ref('nothing')
const selectedAvatar = ref('')

const filterLettersOnly = (field) => {
  if (field === 'name') {
    name.value = name.value.replace(/[^A-Za-z츼-콯치-쮄콡 ]/g, '')
  } else if (field === 'surname') {
    surname.value = surname.value.replace(/[^A-Za-z츼-콯치-쮄콡 ]/g, '')
  }
}

const men = ref([
  {road: "/images/icons/men/01.svg", type: 1},
  {road: "/images/icons/men/02.svg", type: 2},
  {road: "/images/icons/men/03.svg", type: 3},
  {road: "/images/icons/men/04.svg", type: 4},
  {road: "/images/icons/men/05.svg", type: 5}
  //{road: "/images/icons/men/06.svg", type: 6}
])

const women = ref([
  {road: "/images/icons/women/06.svg", type: 6},
  {road: "/images/icons/women/07.svg", type: 7},
  {road: "/images/icons/women/08.svg", type: 8},
  {road: "/images/icons/women/09.svg", type: 9},
  {road: "/images/icons/women/10.svg", type: 10},
])

const righticon = computed(() => {
  if (selectedGender.value === 'men') {
    return men.value  
  } else if (selectedGender.value === 'women') {
    return women.value 
  }
  return [] 
})

watch(selectedGender, () => {
  selectedAvatar.value = ''
})





const switchLayout = inject('switchLayout')

onMounted(() => {
  switchLayout('charcreate')
})

const switchToTeams = () => { 
  sound.play()
  if(name.value === '' || surname.value === '' || nationality.value === 'nothing' || date.value === '' ||  lastwork.value === 'nothing' || selectedGender.value === 'nothing' || avatar.value === '') {
    alert('Vypl켿te pros칤m v코echna pole!')
    return;
  }
  
  $fetch("/api/manager/fullman", {
    method: "PATCH",
    body: {
      name: name.value,
      surname: surname.value,
      nationality: nationality.value,
      date: date.value,
      lastwork: lastwork.value,
      SelectedGender: selectedGender.value,
      selectedAvatar: avatar.value,
      team: 'NULL',
      day: 1,
      NumLimit: 1
    }
  });
  
  navigateTo('teams')
}
</script>
